<?php namespace ZN\Services\Request;

use CallController;

class InternalRedirect extends CallController implements InternalRedirectInterface
{
    //--------------------------------------------------------------------------------------------------------
    //
    // Author     : Ozan UYKUN <ozanbote@gmail.com>
    // Site       : www.znframework.com
    // License    : The MIT License
    // Copyright  : (c) 2012-2016, znframework.com
    //
    //--------------------------------------------------------------------------------------------------------

    //--------------------------------------------------------------------------------------------------------
    // $redirect
    //--------------------------------------------------------------------------------------------------------
    //
    // @var array
    //
    //--------------------------------------------------------------------------------------------------------
    protected $redirect =
    [
        'time'   => 0,
        'data'   => []
    ];

    //--------------------------------------------------------------------------------------------------------
    // action()
    //--------------------------------------------------------------------------------------------------------
    //
    // @var string $action
    //
    //--------------------------------------------------------------------------------------------------------
    public function action(string $action) : void
    {
        $time = $this->redirect['time'];
        $data = $this->redirect['data'];

        $this->redirect = [];

        redirect($action, $time, $data);
    }

    //--------------------------------------------------------------------------------------------------------
    // time()
    //--------------------------------------------------------------------------------------------------------
    //
    // @var numeric $time
    //
    //--------------------------------------------------------------------------------------------------------
    public function time(int $time = 0) : InternalRedirect
    {
        $this->redirect['time'] = $time;

        return $this;
    }

    //--------------------------------------------------------------------------------------------------------
    // wait()
    //--------------------------------------------------------------------------------------------------------
    //
    // @var numeric $time
    //
    //--------------------------------------------------------------------------------------------------------
    public function wait(int $time = 0) : InternalRedirect
    {
        $this->redirect['time'] = $time;

        return $this;
    }

    //--------------------------------------------------------------------------------------------------------
    // data()
    //--------------------------------------------------------------------------------------------------------
    //
    // @var array $data
    //
    //--------------------------------------------------------------------------------------------------------
    public function data(array $data) : InternalRedirect
    {
        $this->redirect['data'] = $data;

        return $this;
    }

    //--------------------------------------------------------------------------------------------------------
    // insert()
    //--------------------------------------------------------------------------------------------------------
    //
    // @var array $data
    //
    //--------------------------------------------------------------------------------------------------------
    public function insert(array $data) : InternalRedirect
    {
        $this->redirect['data'] = $data;

        return $this;
    }

    //--------------------------------------------------------------------------------------------------------
    // select()
    //--------------------------------------------------------------------------------------------------------
    //
    // @var string $key
    //
    //--------------------------------------------------------------------------------------------------------
    public function select(string $key)
    {
        return redirectData($key);
    }

    //--------------------------------------------------------------------------------------------------------
    // delete()
    //--------------------------------------------------------------------------------------------------------
    //
    // @var mixed $key
    //
    //--------------------------------------------------------------------------------------------------------
    public function delete(string $key) : bool
    {
        return redirectDeleteData($key);
    }
}
